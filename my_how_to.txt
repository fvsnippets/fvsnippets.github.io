UTILIZACIÓN DESDE REPOSITORIO

(
$ PATH=$PATH:/c/Ruby193/bin/ ; export PATH
)

$ git clone git@github.com:fvsnippets/fvsnippets.github.io.git myblog
$ git checkout source
$ cd myblog
# Esto no va a existir si se hace desde 0 como dice arriba.
$ rm -Rf _deploy
$ git clone git@github.com:fvsnippets/fvsnippets.github.io.git _deploy

# Escribir posts
$ rake post["Hello World"]
$ vi source/_posts/2014-11-20-hello-world.markdown

$ rake install["readify"] && rake generate && rake preview
(CTRL-C, y[ENTER], y[ENTER], y[ENTER], y[ENTER])


$ rake generate
$ rake deploy
$ git commit -m "New posts of `date`."
$ git push

----

INSTALACIÓN DESDE 0.


### NO USAR CYGWIN ###

# instalar git
# Bajarse Console2
# Asociar console2 con (shell): "C:\Program Files (x86)\Git\bin\sh.exe" --login -i"

# instalar Ruby 1.9.3 (RubyInstaller)
$ PATH=$PATH:/c/Ruby193/bin/ ; export PATH

# instalar DevKit for ruby 1.9.3 https://github.com/downloads/oneclick/rubyinstaller/DevKit-tdm-32-4.5.2-20111229-1559-sfx.exe
$ mv /c/Users/fvalido/Downloads/1 /c/Ruby193/DevKit
$ cd /c/Ruby193/DevKit
$ ruby dk.rb init
$ ruby dk.rb review
$ ruby dk.rb install


# Octopress

$ gem install rake
$ gem install bundler

$ git clone git://github.com/imathis/octopress.git blog
$ cd blog
$ vi Rakefile




# Cambiar

if (/cygwin|mswin|mingw|bccwin|wince|emx/ =~ RUBY_PLATFORM) != nil
  puts '## Set the codepage to 65001 for Windows machines'
  `chcp 65001`
end

# por 

if (/cygwin|mswin|mingw|bccwin|wince|emx/ =~ RUBY_PLATFORM) != nil
  puts '## Set the codepage to 65001 for Windows machines'
  `cmd /c chcp 65001`
end



# Cambiar
desc "deploy public directory to github pages"
multitask :push do
(...)
# Solo esta línea
  (Dir["#{deploy_dir}/*"]).each { |f| rm_rf(f) }
# /Solo esta línea


# Por todo esto:

  exclusions = []
  File.open("#{deploy_dir}/.octopress_deploy_delete_exclude") do |fexclusions|
    fexclusions.lines.each do |line|
      cleanline=line.strip
      exclusions << "#{deploy_dir}/#{cleanline}"
    end
  end
  (Dir["#{deploy_dir}/*"]).each { |f| FileList["#{f}"].exclude(*exclusions).each { |file| rm_rf(file) } }




# Esto que sigue hacerlo (aunque después se vaya a instalar otro tema [readify], ese no contiene todos los archivos que necesito; Esto instala todos los archivos que luego readify reemplaza).
$ rake install

$ git clone https://github.com/vladigleba/readify.git .themes/readify

# Primer modificar archivos:
# (M) Modificado
# (N) Nuevo

# (M) _config.yml
# (M) .themes/readify/sass/custom/_styles.scss
# (M) .themes/readify/source/_includes/custom/head.html
# (N) .themes/readify/source/_includes/custom/navigation.html
# (N) .themes/readify/source/_includes/custom/footer.html
# (N) .themes/readify/source/_includes/head.html

$ rake install['readify']

$ rake generate

# Copiar posts:
# source/_posts/

# Siempre usar un rake generate antes de un preview
$ rake generate && rake preview

# o

$ rake install["readify"] && rake generate && rake preview



# Deploy (setup solo la primera vez)

(Esto hay que repetirlo?)
$ rm -Rf _deploy
$ rake setup_github_pages
git@github.com:fvsnippets/fvsnippets.github.io.git
(/Esto hay que repetirlo?)

# Las dos siguientes lineas evitan conflictos ("non-fast-forward").
$ rm -Rf _deploy
$ git clone git@github.com:fvsnippets/fvsnippets.github.io.git _deploy

$ rake generate
$ rake deploy



# TODO LO QUE SIGUE NO ESTOY SEGURO

$ mkdir -p ../readify/.themes
$ mv .themes/readify/ ../readify/.themes/
$ cd ../readify
$ mv .themes/readify/.git* .
$ git add --all
# Chequear que quede todo agregado.
$ git status
$ git commit -m "Change structure in order to import to Snippets blog source."
$ cd ../blog
# Modificar el archivo:
.themes/readify/README.md
(Temas de licencia)
$ git add -all
# Chequear que quede todo agregado.
$ git status
$ git commit -m "Initial source for Snippets blog (not finished)."

$ git remote add other /path/to/readify/
$ git checkout -b source other/master
# Chequear que se esté en el branch "source"
$ git branch
$ git add --all
# Modificar el archivo:
README.md
(Temas de licencia)
$ git commit -m "Initial source for Snippets blog (part2)."
$ rake setup_github_pages
# Esta línea es necesaria?
$ git push --set-upstream origin source
